<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01
Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta name="generator" content="HTML Tidy, see www.w3.org">
    <title>
      What's New in this Release
    </title>
    <meta name="GENERATOR" content=
    "Modular DocBook HTML Stylesheet Version 1.79">
    <link rel="HOME" title="Privoxy 3.0.18 User Manual" href="index.html">
    <link rel="PREVIOUS" title="Installation" href="installation.html">
    <link rel="NEXT" title="Quickstart to Using Privoxy" href=
    "quickstart.html">
    <link rel="STYLESHEET" type="text/css" href="../p_doc.css">
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <link rel="STYLESHEET" type="text/css" href="p_doc.css">
<style type="text/css">
 body {
  background-color: #EEEEEE;
  color: #000000;
 }
 :link { color: #0000FF }
 :visited { color: #840084 }
 :active { color: #0000FF }
 hr.c1 {text-align: left}
</style>
  </head>
  <body class="SECT1">
    <div class="NAVHEADER">
      <table summary="Header navigation table" width="100%" border="0"
      cellpadding="0" cellspacing="0">
        <tr>
          <th colspan="3" align="center">
            Privoxy 3.0.18 User Manual
          </th>
        </tr>
        <tr>
          <td width="10%" align="left" valign="bottom">
            <a href="installation.html" accesskey="P">Prev</a>
          </td>
          <td width="80%" align="center" valign="bottom">
          </td>
          <td width="10%" align="right" valign="bottom">
            <a href="quickstart.html" accesskey="N">Next</a>
          </td>
        </tr>
      </table>
      <hr width="100%" class="c1">
    </div>
    <div class="SECT1">
      <h1 class="SECT1">
        <a name="WHATSNEW">3. What's New in this Release</a>
      </h1>
      <p>
        <span class="APPLICATION">Privoxy 3.0.17</span> is a stable release.
        The changes since 3.0.16 stable are:
      </p>
      <p>
      </p>
      <ul>
        <li>
          <p>
            Fixed last-chunk-detection for responses where the content was
            small enough to be read with the body, causing Privoxy to wait
            for the end of the content until the server closed the connection
            or the request timed out. Reported by "Karsten" in #3028326.
          </p>
        </li>
        <li>
          <p>
            Responses with status code 204 weren't properly detected as
            body-less like RFC2616 mandates. Like the previous bug, this
            caused Privoxy to wait for the end of the content until the
            server closed the connection or the request timed out. Fixes
            #3022042 and #3025553, reported by a user with no visible name.
            Most likely also fixes a bunch of other AJAX-related problem
            reports that got closed in the past due to insufficient
            information and lack of feedback.
          </p>
        </li>
        <li>
          <p>
            Fixed an ACL bug that made it impossible to build a blacklist.
            Usually the ACL directives are used in a whitelist, which worked
            as expected, but blacklisting is still useful for public proxies
            where one only needs to deny known abusers access.
          </p>
        </li>
        <li>
          <p>
            Added LOG_LEVEL_RECEIVED to log the not-yet-parsed data read from
            the network. This should make debugging various parsing issues a
            lot easier.
          </p>
        </li>
        <li>
          <p>
            The IPv6 code is enabled by default on Windows versions that
            support it. Patch submitted by oCameLo in #2942729.
          </p>
        </li>
        <li>
          <p>
            In mingw32 versions, the user.filter file is reachable through
            the GUI, just like default.filter is. Feature request 3040263.
          </p>
        </li>
        <li>
          <p>
            Added the configure option --enable-large-file-support to set a
            few defines that are required by platforms like GNU/Linux to
            support files larger then 2GB. Mainly interesting for users
            without proper logfile management.
          </p>
        </li>
        <li>
          <p>
            Logging with "debug 16" no longer stops at the first nul byte
            which is pretty useless. Non-printable characters are replaced
            with their hex value so the result can't span multiple lines
            making parsing them harder then necessary.
          </p>
        </li>
        <li>
          <p>
            Privoxy logs when reading an action, filter or trust file.
          </p>
        </li>
        <li>
          <p>
            Fixed incorrect regression test markup which caused a test in
            3.0.16 to fail while Privoxy itself was working correctly. While
            Privoxy accepts hide-referer, too, the action name is actually
            hide-referrer which is also the name used one the final results
            page, where the test expected the alias.
          </p>
        </li>
        <li>
          <p>
            CGI interface improvements:
          </p>
          <ul>
            <li>
              <p>
                In finish_http_response(), continue to add the 'Connection:
                close' header if the client connection will not be kept
                alive. Anonymously pointed out in #2987454.
              </p>
            </li>
            <li>
              <p>
                Apostrophes in block messages no longer cause parse errors
                when the blocked page is viewed with JavaScript enabled.
                Reported by dg1727 in #3062296.
              </p>
            </li>
            <li>
              <p>
                Fix a bunch of anchors that used underscores instead of
                dashes.
              </p>
            </li>
            <li>
              <p>
                Allow to keep the client connection alive after crunching the
                previous request. Already opened server connections can be
                kept alive, too.
              </p>
            </li>
            <li>
              <p>
                In cgi_show_url_info(), don't forget to prefix URLs that only
                contain http:// or https:// in the path. Fixes #2975765
                reported by Adam Piggott.
              </p>
            </li>
            <li>
              <p>
                Show the 404 CGI page if cgi_send_user_manual() is called
                while local user manual delivery is disabled.
              </p>
            </li>
          </ul>
        </li>
        <li>
          <p>
            Action file improvements:
          </p>
          <ul>
            <li>
              <p>
                Enable user.filter by default. Suggested by David White in
                #3001830.
              </p>
            </li>
            <li>
              <p>
                Block .sitestat.com/. Reported by johnd16 in #3002725.
              </p>
            </li>
            <li>
              <p>
                Block .atemda.com/. Reported by johnd16 in #3002723.
              </p>
            </li>
            <li>
              <p>
                Block js.adlink.net/. Reported by johnd16 in #3002720.
              </p>
            </li>
            <li>
              <p>
                Block .analytics.yahoo.com/. Reported by johnd16 in #3002713.
              </p>
            </li>
            <li>
              <p>
                Block sb.scorecardresearch.com, too. Reported by dg1727 in
                #2992652.
              </p>
            </li>
            <li>
              <p>
                Fix problems noticed on Yahoo mail and news pages.
              </p>
            </li>
            <li>
              <p>
                Remove the too broad yahoo section, only keeping the
                fast-redirects exception as discussed on ijbswa-devel@.
              </p>
            </li>
            <li>
              <p>
                Don't block adesklets.sourceforge.net. Reported in #2974204.
              </p>
            </li>
            <li>
              <p>
                Block chartbeat ping tracking. Reported in #2975895.
              </p>
            </li>
            <li>
              <p>
                Tag CSS and image requests with cautious and medium settings,
                too.
              </p>
            </li>
            <li>
              <p>
                Don't handle view.atdmt.com as image. It's used for
                click-throughs so users should be able to "go there anyway".
                Reported by Adam Piggott in #2975927.
              </p>
            </li>
            <li>
              <p>
                Also let the refresh-tags filter remove invalid refresh tags
                where the 'url=' part is missing. Anonymously reported in
                #2986382. While at it, update the description to mention the
                fact that only refresh tags with refresh times above 9
                seconds are covered.
              </p>
            </li>
            <li>
              <p>
                javascript needs to be blocked with +handle-as-empty-document
                to work around Firefox bug 492459. So move .js blockers from
                +block{Might be a web-bug.} -handle-as-empty-document to
                +block{Might be a web-bug.} +handle-as-empty-document.
              </p>
            </li>
            <li>
              <p>
                ijbswa-Feature Requests-3006719 - Block 160x578 Banners.
              </p>
            </li>
            <li>
              <p>
                Block another omniture tracking domain.
              </p>
            </li>
            <li>
              <p>
                Added a range-requests tagger.
              </p>
            </li>
            <li>
              <p>
                Added two sections to get Flickr's Ajax interface working
                with default pre-settings. If you change the configuration to
                block cookies by default, you'll need additional exceptions.
                Reported by Mathias Homann in #3101419 and by Patrick on
                ijbswa-users@.
              </p>
            </li>
          </ul>
        </li>
        <li>
          <p>
            Documentation improvements:
          </p>
          <ul>
            <li>
              <p>
                Explicitly mention how to match all URLs.
              </p>
            </li>
            <li>
              <p>
                Consistently recommend socks5 in the Tor FAQ entry and
                mention its advantage compared to socks4a. Reported by David
                in #2960129.
              </p>
            </li>
            <li>
              <p>
                Slightly improve the explanation of why filtering may appear
                slower than it is.
              </p>
            </li>
            <li>
              <p>
                Grammar fixes for the ACL section.
              </p>
            </li>
            <li>
              <p>
                Fixed a link to the 'intercepting' entry and add another one.
              </p>
            </li>
            <li>
              <p>
                Rename the 'Other' section to 'Mailing Lists' and reword it
                to make it clear that nobody is forced to use the trackers
              </p>
            </li>
            <li>
              <p>
                Note that 'anonymously' posting on the trackers may not
                always be possible.
              </p>
            </li>
            <li>
              <p>
                Suggest to enable debug 32768 when suspecting parsing
                problems.
              </p>
            </li>
          </ul>
        </li>
        <li>
          <p>
            Privoxy-Log-Parser improvements:
          </p>
          <ul>
            <li>
              <p>
                Gather statistics for ressources, methods, and HTTP versions
                used by the client.
              </p>
            </li>
            <li>
              <p>
                Also gather statistics for blocked and redirected requests.
              </p>
            </li>
            <li>
              <p>
                Provide the percentage of keep-alive offers the client
                accepted.
              </p>
            </li>
            <li>
              <p>
                Add a --url-statistics-threshold option.
              </p>
            </li>
            <li>
              <p>
                Add a --host-statistics-threshold option to also gather
                statistics about how many request where made per host.
              </p>
            </li>
            <li>
              <p>
                Fix a bug in handle_loglevel_header() where a 'scan: ' got
                lost.
              </p>
            </li>
            <li>
              <p>
                Add a --shorten-thread-ids option to replace the thread id
                with a decimal number.
              </p>
            </li>
            <li>
              <p>
                Accept and ignore: Looks like we got the last chunk together
                with the server headers. We better stop reading.
              </p>
            </li>
            <li>
              <p>
                Accept and ignore: Continue hack in da house.
              </p>
            </li>
            <li>
              <p>
                Accept and higlight: Rejecting connection from 10.0.0.2.
                Maximum number of connections reached.
              </p>
            </li>
            <li>
              <p>
                Accept and highlight: Loading actions file:
                /usr/local/etc/privoxy/default.action
              </p>
            </li>
            <li>
              <p>
                Accept and highlight: Loading filter file:
                /usr/local/etc/privoxy/default.filter
              </p>
            </li>
            <li>
              <p>
                Accept and highlight: Killed all-caps Host header line: HOST:
                bestproxydb.com
              </p>
            </li>
            <li>
              <p>
                Accept and highlight: Reducing expected bytes to 0. Marking
                the server socket tainted after throwing 4 bytes away.
              </p>
            </li>
            <li>
              <p>
                Accept: Merged multiple header lines to: 'X-FORWARDED-PROTO:
                http X-HOST: 127.0.0.1'
              </p>
            </li>
          </ul>
        </li>
        <li>
          <p>
            Code cleanups:
          </p>
          <ul>
            <li>
              <p>
                Remove the next member from the client_state struct. Only the
                main thread needs access to all client states so give it its
                own struct.
              </p>
            </li>
            <li>
              <p>
                Garbage-collect request_contains_null_bytes().
              </p>
            </li>
            <li>
              <p>
                Ditch redundant code in unload_configfile().
              </p>
            </li>
            <li>
              <p>
                Ditch LogGetURLUnderCursor() which doesn't seem to be used
                anywhere.
              </p>
            </li>
            <li>
              <p>
                In write_socket(), remove the write-only variable write_len
                in an ifdef __OS2__ block. Spotted by cppcheck.
              </p>
            </li>
            <li>
              <p>
                In connect_to(), don't declare the variable 'flags' on OS/2
                where it isn't used. Spotted by cppcheck.
              </p>
            </li>
            <li>
              <p>
                Limit the scope of various variables. Spotted by cppcheck.
              </p>
            </li>
            <li>
              <p>
                In add_to_iob(), turn an interestingly looking for loop into
                a boring while loop.
              </p>
            </li>
            <li>
              <p>
                Code cleanup in preparation for external filters.
              </p>
            </li>
            <li>
              <p>
                In listen_loop(), mention the socket on which we accepted the
                connection, not just the source IP address.
              </p>
            </li>
            <li>
              <p>
                In write_socket(), also log the socket we're writing to.
              </p>
            </li>
            <li>
              <p>
                In log_error(), assert that escaped characters get logged
                completely or not at all.
              </p>
            </li>
            <li>
              <p>
                In log_error(), assert that ival and sval have reasonable
                values. There's no reason not to abort() if they don't.
              </p>
            </li>
            <li>
              <p>
                Remove an incorrect cgi_error_unknown() call in a
                cannot-happen-situation in send_crunch_response().
              </p>
            </li>
            <li>
              <p>
                Clean up white-space in http_response definition and move the
                crunch_reason to the beginning.
              </p>
            </li>
            <li>
              <p>
                Turn http_response.reason into an enum and rename it to
                http_response.crunch_reason.
              </p>
            </li>
            <li>
              <p>
                Silence a 'gcc (Debian 4.3.2-1.1) 4.3.2' warning on i686
                GNU/Linux.
              </p>
            </li>
            <li>
              <p>
                Fix white-space in a log message in
                remove_chunked_transfer_coding(). While at it, add a note
                that the message doesn't seem to be entirely correct and
                should be improved later on.
              </p>
            </li>
          </ul>
        </li>
        <li>
          <p>
            GNUmakefile improvements:
          </p>
          <ul>
            <li>
              <p>
                Use $(SSH) instead of ssh, so one only needs to specify a
                username once.
              </p>
            </li>
            <li>
              <p>
                Removed references to the action feedback thingy that hasn't
                been working for years.
              </p>
            </li>
            <li>
              <p>
                Consistently use shell.sourceforge.net instead of
                shell.sf.net so one doesn't need to check server fingerprints
                twice.
              </p>
            </li>
            <li>
              <p>
                Removed GNUisms in the webserver and webactions targets so
                they work with standard tar.
              </p>
            </li>
          </ul>
        </li>
      </ul>

      <div class="SECT2">
        <h2 class="SECT2">
          <a name="UPGRADERSNOTE">3.1. Note to Upgraders</a>
        </h2>
        <p>
          A quick list of things to be aware of before upgrading from earlier
          versions of <span class="APPLICATION">Privoxy</span>:
        </p>
        <p>
        </p>
        <ul>
          <li>
            <p>
              The recommended way to upgrade <span class=
              "APPLICATION">Privoxy</span> is to backup your old
              configuration files, install the new ones, verify that <span
              class="APPLICATION">Privoxy</span> is working correctly and
              finally merge back your changes using <span class=
              "APPLICATION">diff</span> and maybe <span class=
              "APPLICATION">patch</span>.
            </p>
            <p>
              There are a number of new features in each <span class=
              "APPLICATION">Privoxy</span> release and most of them have to
              be explicitly enabled in the configuration files. Old
              configuration files obviously don't do that and due to syntax
              changes using old configuration files with a new <span class=
              "APPLICATION">Privoxy</span> isn't always possible anyway.
            </p>
          </li>
          <li>
            <p>
              Note that some installers remove earlier versions completely,
              including configuration files, therefore you should really save
              any important configuration files!
            </p>
          </li>
          <li>
            <p>
              On the other hand, other installers don't overwrite existing
              configuration files, thinking you will want to do that
              yourself.
            </p>
          </li>
          <li>
            <p>
              <tt class="FILENAME">standard.action</tt> has been merged into
              the <tt class="FILENAME">default.action</tt> file.
            </p>
          </li>
          <li>
            <p>
              In the default configuration only fatal errors are logged now.
              You can change that in the <a href="config.html#DEBUG">debug
              section</a> of the configuration file. You may also want to
              enable more verbose logging until you verified that the new
              <span class="APPLICATION">Privoxy</span> version is working as
              expected.
            </p>
          </li>
          <li>
            <p>
              Three other config file settings are now off by default: <a
              href=
              "config.html#ENABLE-REMOTE-TOGGLE">enable-remote-toggle</a>, <a
              href=
              "config.html#ENABLE-REMOTE-HTTP-TOGGLE">enable-remote-http-toggle</a>,
              and <a href=
              "config.html#ENABLE-EDIT-ACTIONS">enable-edit-actions</a>. If
              you use or want these, you will need to explicitly enable them,
              and be aware of the security issues involved.
            </p>
          </li>
        </ul>
      </div>
    </div>
    <div class="NAVFOOTER">
      <hr width="100%" class="c1">
      <table summary="Footer navigation table" width="100%" border="0"
      cellpadding="0" cellspacing="0">
        <tr>
          <td width="33%" align="left" valign="top">
            <a href="installation.html" accesskey="P">Prev</a>
          </td>
          <td width="34%" align="center" valign="top">
            <a href="index.html" accesskey="H">Home</a>
          </td>
          <td width="33%" align="right" valign="top">
            <a href="quickstart.html" accesskey="N">Next</a>
          </td>
        </tr>
        <tr>
          <td width="33%" align="left" valign="top">
            Installation
          </td>
          <td width="34%" align="center" valign="top">
            &nbsp;
          </td>
          <td width="33%" align="right" valign="top">
            Quickstart to Using Privoxy
          </td>
        </tr>
      </table>
    </div>
  </body>
</html>

